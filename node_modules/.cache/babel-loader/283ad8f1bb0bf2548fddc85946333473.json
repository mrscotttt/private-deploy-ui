{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport draggable from \"vuedraggable\";\nimport axios from 'axios';\nimport previewTicket from './previewTicket';\nimport addTicket from './addTicket';\nimport moment from 'moment';\nexport default {\n  name: 'dragTicket',\n  components: {\n    draggable,\n    previewTicket,\n    addTicket\n  },\n  data: () => ({\n    previewDialog: false,\n    report: [],\n    ticketCard: [],\n    ticketGroup: {\n      pending: [],\n      accepted: [],\n      resolved: [],\n      rejected: []\n    }\n  }),\n  created: async function () {\n    await this.hookticket();\n    await this.groupUp();\n  },\n  computed: {\n    // createTime(){\n    //   return moment(this.editTicket.createTime).format(\"DD MMM YYYY hh:mm\")\n    // }\n  },\n  methods: {\n    async log(evt, status) {\n      // this.report.push(evt)\n      if (evt.added) {\n        let updateParams = evt.added.element;\n        updateParams.status = status;\n        try {\n          let tkt = await axios.post('/updateStatusTicket', updateParams);\n          console.log(\"update success\");\n        } catch (err) {\n          console.log(\"update fail\", err);\n        }\n      }\n    },\n    async hookticket() {\n      try {\n        let tkt = await axios.get('/ticket');\n        this.ticketCard = tkt.data.Items;\n        if (this.ticketCard.length > 0) {\n          this.ticketCard.sort((a, b) => a.createTime - b.createTime);\n        }\n      } catch (err) {\n        this.ticketCard = [];\n      }\n    },\n    async groupUp() {\n      let t = await this.ticketCard;\n      let g = {\n        pending: [],\n        accepted: [],\n        resolved: [],\n        rejected: []\n      };\n      for (var i = 0; i < t.length; i++) {\n        t[i].createTimeFormat = moment(t[i].createTime).format(\"DD MMM YYYY hh:mm\");\n        if (t[i].status == \"pending\") {\n          g.pending.push(t[i]);\n        } else if (t[i].status == \"accepted\") {\n          g.accepted.push(t[i]);\n        } else if (t[i].status == \"resolved\") {\n          g.resolved.push(t[i]);\n        } else if (t[i].status == \"rejected\") {\n          g.rejected.push(t[i]);\n        }\n      }\n      this.ticketGroup = g;\n    }\n  }\n};","map":{"version":3,"mappings":";AA8QA;AACA;AACA;AACA;AACA;AAEA;EACAA;EACAC;IAAAC;IAAAC;IAAAC;EAAA;EACAC;IACAC;IACAC;IACAC;IACAC;MAAAC;MAAAC;MAAAC;MAAAC;IAAA;EACA;EACAC;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;EACA;EACAC;IACA;MACA;MACA;QACA;QACAC;QACA;UACA;UACAC;QACA,EACA;UACAA;QACA;MACA;IACA;IACA;MACA;QACA;QACA;QACA;UAAA;QAAA;MACA,EACA;QACA;MACA;IACA;IACA;MACA;MACA;QAAAR;QAAAC;QAAAC;QAAAC;MAAA;MACA;QACAM;QACA;UAAAC;QAAA,OACA;UAAAA;QAAA,OACA;UAAAA;QAAA,OACA;UAAAA;QAAA;MACA;MACA;IACA;EAEA;AACA","names":["name","components","draggable","previewTicket","addTicket","data","previewDialog","report","ticketCard","ticketGroup","pending","accepted","resolved","rejected","created","computed","methods","updateParams","console","t","g"],"sourceRoot":"src/components","sources":["dragTicket.vue"],"sourcesContent":["<template>\r\n    <div class=\"p-16 dragFont\">\r\n        <div class=\"rounded-lg dragArea w-full justify-center  p-8 text-black drop-shadow-2xl backdrop-blur-md bg-white/60\">\r\n            <!-- {{ticketGroup}} -->\r\n            <div class=\"grid grid-cols-4 gap-2\">\r\n                  <div> \r\n                    <div>\r\n                      <h5 class=\"mb-8 text-center text-2xl font-bold tracking-tight text-gray-900\">\r\n                      <font-awesome-icon icon=\"fa-solid fa-flag\" />{{' '}}Pending\r\n                      </h5>\r\n                    </div>\r\n                    <div class=\"rounded-lg dragInnerArea justify-center p-4 text-black drop-shadow-2xl bg-white/60 overflow-y-auto overflow-x-auto\">\r\n                      <draggable :list=\"ticketGroup.pending\" group=\"people\" @change=\"log($event,'pending')\">\r\n                        <div\r\n                          class=\"list-group-item\"\r\n                          v-for=\"(element, index) in ticketGroup.pending\"\r\n                          :key=\"element.name\"\r\n                        >\r\n                          <div class=\"\">\r\n                            <a class=\"w-full flex mt-6 rounded-3xl inline-block overflow-hidden shadow-xl rounded-lg cursor-pointer transition ease-in-out hover:-translate-y-1 hover:scale-102 duration-300\">\r\n                                <div class=\"bg-indigo-700 w-3\">\r\n                                </div>\r\n                                <div class=\"bg-white w-full\">\r\n                                    <div class=\"text-center px-3 pb-6 pt-2\">\r\n                                        <div class=\"mt-2 font-bold text-slate-700\">\r\n                                          {{element.title}}\r\n                                        </div>\r\n                                        <div class=\"mt-2 font-light text-slate-700\">\r\n                                          {{element.description}}\r\n                                        </div>\r\n                                        <div class=\"mt-2 font-light text-slate-700\">\r\n                                          {{element.createTimeFormat}}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"flex justify-center pb-3 text-slate-700\">\r\n                                        <div>\r\n                                          <previewTicket :parentmessage=\"element\"></previewTicket>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                          <addTicket :parentmessage=\"element\"></addTicket>\r\n                                        </div>\r\n\r\n                                        <!-- <a class=\"w-8 h-8\" v-bind=\"attrs\" v-on=\"on\" >\r\n                                            <font-awesome-icon class=\"w-8 h-8 text-yellow-500\" icon=\"fa-solid fa-pen-to-square\" />\r\n                                        </a> -->\r\n                                    </div>\r\n                                </div>\r\n                            </a>\r\n                        </div>\r\n                        </div>\r\n                      </draggable>\r\n                    </div>\r\n                  </div>\r\n                  <div> \r\n                    <div>\r\n                      <h5 class=\"mb-8 text-center text-2xl font-bold tracking-tight text-gray-900\">\r\n                      <font-awesome-icon icon=\"fa-solid fa-flag\" />{{' '}}accepted\r\n                      </h5>\r\n                    </div>\r\n                    <div class=\"rounded-lg dragInnerArea justify-center p-4 text-black drop-shadow-2xl bg-white/60 overflow-y-auto overflow-x-auto\">\r\n                      <draggable :list=\"ticketGroup.accepted\" group=\"people\" @change=\"log($event,'accepted')\">\r\n                        <div\r\n                          class=\"list-group-item\"\r\n                          v-for=\"(element, index) in ticketGroup.accepted\"\r\n                          :key=\"element.name\"\r\n                        >\r\n                          <div class=\"\">\r\n                            <a class=\"w-full flex mt-6 rounded-3xl inline-block overflow-hidden shadow-xl rounded-lg cursor-pointer transition ease-in-out hover:-translate-y-1 hover:scale-102 duration-300\">\r\n                                <div class=\"bg-indigo-700 w-3\">\r\n                                </div>\r\n                                <div class=\"bg-white w-full\">\r\n                                    <div class=\"text-center px-3 pb-6 pt-2\">\r\n                                        <div class=\"mt-2 font-bold text-slate-700\">\r\n                                          {{element.title}}\r\n                                        </div>\r\n                                        <div class=\"mt-2 font-light text-slate-700\">\r\n                                          {{element.description}}\r\n                                        </div>\r\n                                        <div class=\"mt-2 font-light text-slate-700\">\r\n                                          {{element.createTimeFormat}}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"flex justify-center pb-3 text-slate-700\">\r\n                                        <div>\r\n                                          <previewTicket :parentmessage=\"element\"></previewTicket>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                          <addTicket :parentmessage=\"element\"></addTicket>\r\n                                        </div>\r\n\r\n                                        <!-- <a class=\"w-8 h-8\" v-bind=\"attrs\" v-on=\"on\" >\r\n                                            <font-awesome-icon class=\"w-8 h-8 text-yellow-500\" icon=\"fa-solid fa-pen-to-square\" />\r\n                                        </a> -->\r\n                                    </div>\r\n                                </div>\r\n                            </a>\r\n                        </div>\r\n                        </div>\r\n                      </draggable>\r\n                    </div>\r\n                  </div> \r\n                  <div> \r\n                    <div>\r\n                      <h5 class=\"mb-8 text-center text-2xl font-bold tracking-tight text-gray-900\">\r\n                      <font-awesome-icon icon=\"fa-solid fa-flag\" />{{' '}}Pending\r\n                      </h5>\r\n                    </div>\r\n                    <div class=\"rounded-lg dragInnerArea justify-center p-4 text-black drop-shadow-2xl bg-white/60 overflow-y-auto overflow-x-auto\">\r\n                      <draggable :list=\"ticketGroup.pending\" group=\"people\" @change=\"log($event,'pending')\">\r\n                        <div\r\n                          class=\"list-group-item\"\r\n                          v-for=\"(element, index) in ticketGroup.pending\"\r\n                          :key=\"element.name\"\r\n                        >\r\n                          <div class=\"\">\r\n                            <a class=\"w-full flex mt-6 rounded-3xl inline-block overflow-hidden shadow-xl rounded-lg cursor-pointer transition ease-in-out hover:-translate-y-1 hover:scale-102 duration-300\">\r\n                                <div class=\"bg-indigo-700 w-3\">\r\n                                </div>\r\n                                <div class=\"bg-white w-full\">\r\n                                    <div class=\"text-center px-3 pb-6 pt-2\">\r\n                                        <div class=\"mt-2 font-bold text-slate-700\">\r\n                                          {{element.title}}\r\n                                        </div>\r\n                                        <div class=\"mt-2 font-light text-slate-700\">\r\n                                          {{element.description}}\r\n                                        </div>\r\n                                        <div class=\"mt-2 font-light text-slate-700\">\r\n                                          {{element.createTimeFormat}}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"flex justify-center pb-3 text-slate-700\">\r\n                                        <div>\r\n                                          <previewTicket :parentmessage=\"element\"></previewTicket>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                          <addTicket :parentmessage=\"element\"></addTicket>\r\n                                        </div>\r\n\r\n                                        <!-- <a class=\"w-8 h-8\" v-bind=\"attrs\" v-on=\"on\" >\r\n                                            <font-awesome-icon class=\"w-8 h-8 text-yellow-500\" icon=\"fa-solid fa-pen-to-square\" />\r\n                                        </a> -->\r\n                                    </div>\r\n                                </div>\r\n                            </a>\r\n                        </div>\r\n                        </div>\r\n                      </draggable>\r\n                    </div>\r\n                  </div> \r\n                  <div> \r\n                    <div>\r\n                      <h5 class=\"mb-8 text-center text-2xl font-bold tracking-tight text-gray-900\">\r\n                      <font-awesome-icon icon=\"fa-solid fa-flag\" />{{' '}}Rejected\r\n                      </h5>\r\n                    </div>\r\n                    <div class=\"rounded-lg dragInnerArea justify-center p-4 text-black drop-shadow-2xl bg-white/60 overflow-y-auto overflow-x-auto\">\r\n                      <draggable :list=\"ticketGroup.pending\" group=\"people\" @change=\"log($event,'rejected')\">\r\n                        <div\r\n                          class=\"list-group-item\"\r\n                          v-for=\"(element, index) in ticketGroup.pending\"\r\n                          :key=\"element.name\"\r\n                        >\r\n                          <div class=\"\">\r\n                            <a class=\"w-full flex mt-6 rounded-3xl inline-block overflow-hidden shadow-xl rounded-lg cursor-pointer transition ease-in-out hover:-translate-y-1 hover:scale-102 duration-300\">\r\n                                <div class=\"bg-indigo-700 w-3\">\r\n                                </div>\r\n                                <div class=\"bg-white w-full\">\r\n                                    <div class=\"text-center px-3 pb-6 pt-2\">\r\n                                        <div class=\"mt-2 font-bold text-slate-700\">\r\n                                          {{element.title}}\r\n                                        </div>\r\n                                        <div class=\"mt-2 font-light text-slate-700\">\r\n                                          {{element.description}}\r\n                                        </div>\r\n                                        <div class=\"mt-2 font-light text-slate-700\">\r\n                                          {{element.createTimeFormat}}\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"flex justify-center pb-3 text-slate-700\">\r\n                                        <div>\r\n                                          <previewTicket :parentmessage=\"element\"></previewTicket>\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                          <addTicket :parentmessage=\"element\"></addTicket>\r\n                                        </div>\r\n\r\n                                        <!-- <a class=\"w-8 h-8\" v-bind=\"attrs\" v-on=\"on\" >\r\n                                            <font-awesome-icon class=\"w-8 h-8 text-yellow-500\" icon=\"fa-solid fa-pen-to-square\" />\r\n                                        </a> -->\r\n                                    </div>\r\n                                </div>\r\n                            </a>\r\n                        </div>\r\n                        </div>\r\n                      </draggable>\r\n                    </div>\r\n                  </div> \r\n                <!-- <div class=\"rounded-lg dragInnerArea justify-center p-8 text-black drop-shadow-2xl bg-white/60 overflow-y-auto overflow-x-auto\">\r\n                  <h5 class=\"mb-2 text-2xl font-bold tracking-tight text-gray-900\">Accepted</h5>\r\n                  <draggable :list=\"ticketGroup.accepted\" group=\"people\" @change=\"log($event,'accepted')\">\r\n                    <div\r\n                      class=\"list-group-item\"\r\n                      v-for=\"(element, index) in ticketGroup.accepted\"\r\n                      :key=\"element.name\"\r\n                    >\r\n                      <div class=\"flex justify-center mt-6\">\r\n                        <div class=\"block p-6 rounded-lg shadow-lg bg-white max-w-sm\">\r\n                          <h5 class=\"text-gray-900 text-xl leading-tight font-medium mb-2\">{{element.title}}</h5>\r\n                          <p class=\"text-gray-700 text-base mb-4\">\r\n                            Some quick example text to build on the card title and make up the bulk of the card's\r\n                            content. {{element.status}}\r\n                          </p>\r\n                          <button type=\"button\" class=\" inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out\">Button</button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </draggable>\r\n              </div>\r\n              <div class=\"rounded-lg dragInnerArea justify-center p-8 text-black drop-shadow-2xl bg-white/60\">\r\n                <h5 class=\"mb-2 text-2xl font-bold tracking-tight text-gray-900\">Resolved</h5>\r\n                <draggable :list=\"ticketGroup.resolved\" group=\"people\" @change=\"log($event,'resolved')\">\r\n                  <div\r\n                    class=\"list-group-item\"\r\n                    v-for=\"(element, index) in ticketGroup.resolved\"\r\n                    :key=\"element.name\"\r\n                  >\r\n                    <div class=\"flex justify-center mt-6\">\r\n                      <div class=\"block p-6 rounded-lg shadow-lg bg-white max-w-sm\">\r\n                        <h5 class=\"text-gray-900 text-xl leading-tight font-medium mb-2\">{{element.title}}</h5>\r\n                        <p class=\"text-gray-700 text-base mb-4\">\r\n                          Some quick example text to build on the card title and make up the bulk of the card's\r\n                          content. {{element.status}}\r\n                        </p>\r\n                        <button type=\"button\" class=\" inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out\">Button</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </draggable>\r\n            </div>\r\n            <div class=\"rounded-lg dragInnerArea justify-center p-8 text-black drop-shadow-2xl bg-white/60\">\r\n              <h5 class=\"mb-2 text-2xl font-bold tracking-tight text-gray-900\">Rejected</h5>\r\n              <draggable :list=\"ticketGroup.rejected\" group=\"people\" @change=\"log($event,'rejected')\">\r\n                <div\r\n                  class=\"list-group-item\"\r\n                  v-for=\"(element, index) in ticketGroup.rejected\"\r\n                  :key=\"element.name\"\r\n                >\r\n                  <div class=\"flex justify-center mt-6\">\r\n                    <div class=\"block p-6 rounded-lg shadow-lg bg-white max-w-sm\">\r\n                      <h5 class=\"text-gray-900 text-xl leading-tight font-medium mb-2\">{{element.title}}</h5>\r\n                      <p class=\"text-gray-700 text-base mb-4\">\r\n                        Some quick example text to build on the card title and make up the bulk of the card's\r\n                        content. {{element.status}}\r\n                      </p>\r\n                      <button type=\"button\" class=\" inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out\">Button</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </draggable>\r\n          </div> -->\r\n          </div>\r\n        </div>\r\n    </div>\r\n  </template>\r\n\r\n  <script>\r\n  import draggable from \"vuedraggable\";\r\n  import axios from 'axios'\r\n  import previewTicket from './previewTicket';\r\n  import addTicket from './addTicket';\r\n  import moment from 'moment';\r\n\r\n  export default {\r\n    name: 'dragTicket',\r\n    components: {draggable,previewTicket,addTicket},\r\n    data: () => ({\r\n      previewDialog: false,\r\n      report: [],\r\n      ticketCard: [],\r\n      ticketGroup: {pending: [],accepted: [],resolved: [],rejected: []}\r\n    }),\r\n    created: async function(){\r\n        await this.hookticket()\r\n        await this.groupUp()\r\n    },\r\n    computed: {\r\n        // createTime(){\r\n        //   return moment(this.editTicket.createTime).format(\"DD MMM YYYY hh:mm\")\r\n        // }\r\n    },\r\n    methods: {\r\n        async log(evt,status) {\r\n            // this.report.push(evt)\r\n            if(evt.added){\r\n              let updateParams = evt.added.element\r\n              updateParams.status = status\r\n              try{\r\n                let tkt = await axios.post('/updateStatusTicket',updateParams)\r\n                console.log(\"update success\")\r\n              }\r\n              catch(err){\r\n                console.log(\"update fail\",err)\r\n              }\r\n            }\r\n        },\r\n        async hookticket() {\r\n            try{\r\n                let tkt = await axios.get('/ticket')\r\n                this.ticketCard = tkt.data.Items\r\n                if(this.ticketCard.length>0){this.ticketCard.sort((a, b) => a.createTime - b.createTime);}\r\n            }\r\n            catch(err){\r\n                this.ticketCard = []\r\n            }\r\n        },\r\n        async groupUp() {\r\n            let t = await this.ticketCard\r\n            let g = {pending: [],accepted: [],resolved: [],rejected: []}\r\n            for(var i=0;i<t.length;i++){\r\n                t[i].createTimeFormat = moment(t[i].createTime).format(\"DD MMM YYYY hh:mm\")\r\n                if(t[i].status==\"pending\"){(g.pending).push(t[i])}\r\n                else if(t[i].status==\"accepted\"){(g.accepted).push(t[i])}\r\n                else if(t[i].status==\"resolved\"){(g.resolved).push(t[i])}\r\n                else if(t[i].status==\"rejected\"){(g.rejected).push(t[i])}\r\n            }\r\n            this.ticketGroup = g\r\n        }\r\n\r\n    }\r\n  }\r\n\r\n  </script>\r\n\r\n  <style>\r\n  @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@500&family=Prompt:wght@500&display=swap');\r\n  .dragFont{\r\n    font-family: 'IBM Plex Sans Thai', sans-serif !important;\r\n  }\r\n\r\n  .dragArea{\r\n    height: 1050px !important;\r\n  }\r\n  .dragInnerArea{\r\n    height: 900px !important;\r\n  }\r\n  .column-width {\r\n    min-width: 320px;\r\n    width: 320px;\r\n  }\r\n  .ghost-card {\r\n    opacity: 0.5;\r\n    background: #F7FAFC;\r\n    border: 1px solid #4299e1;\r\n  }\r\n  .ticketCard {\r\n    opacity: 0.5;\r\n    background: #F7FAFC;\r\n    border: 1px solid #4299e1;\r\n  }\r\n  .barcode {\r\n\t\tleft: 50%;\r\n\t\tbox-shadow: 1px 0 0 1px, 5px 0 0 1px, 10px 0 0 1px, 11px 0 0 1px, 15px 0 0 1px, 18px 0 0 1px, 22px 0 0 1px, 23px 0 0 1px, 26px 0 0 1px, 30px 0 0 1px, 35px 0 0 1px, 37px 0 0 1px, 41px 0 0 1px, 44px 0 0 1px, 47px 0 0 1px, 51px 0 0 1px, 56px 0 0 1px, 59px 0 0 1px, 64px 0 0 1px, 68px 0 0 1px, 72px 0 0 1px, 74px 0 0 1px, 77px 0 0 1px, 81px 0 0 1px, 85px 0 0 1px, 88px 0 0 1px, 92px 0 0 1px, 95px 0 0 1px, 96px 0 0 1px, 97px 0 0 1px, 101px 0 0 1px, 105px 0 0 1px, 109px 0 0 1px, 110px 0 0 1px, 113px 0 0 1px, 116px 0 0 1px, 120px 0 0 1px, 123px 0 0 1px, 127px 0 0 1px, 130px 0 0 1px, 131px 0 0 1px, 134px 0 0 1px, 135px 0 0 1px, 138px 0 0 1px, 141px 0 0 1px, 144px 0 0 1px, 147px 0 0 1px, 148px 0 0 1px, 151px 0 0 1px, 155px 0 0 1px, 158px 0 0 1px, 162px 0 0 1px, 165px 0 0 1px, 168px 0 0 1px, 173px 0 0 1px, 176px 0 0 1px, 177px 0 0 1px, 180px 0 0 1px;\r\n\t\tdisplay: inline-block;\r\n\t\ttransform: translateX(-90px);\r\n\t}\r\n  </style>\r\n"]},"metadata":{},"sourceType":"module"}