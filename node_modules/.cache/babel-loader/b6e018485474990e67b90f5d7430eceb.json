{"ast":null,"code":"import moment from 'moment';\nimport axios from 'axios';\nexport default {\n  name: 'dragTicket',\n  props: ['parentmessage'],\n  data: () => ({\n    previewDialog: false,\n    items: ['Foo', 'Bar', 'Fizz', 'Buzz'],\n    statusSelect: [\"pending\", \"accepted\", \"resolved\", \"rejected\"],\n    yearSelect: [1, 2, 3, 4, 5, 6, 7, 8, \"จบการศึกษา\"],\n    facultySelect: [\"คณะเกษตร\", \"คณะบริหารธุรกิจ\", \"คณะประมง\", \"คณะมนุษยศาสตร์\", \"คณะวนศาสตร์\", \"คณะวิทยาศาสตร์\", \"คณะวิศวกรรมศาสตร์\", \"คณะศึกษาศาสตร์\", \"คณะเศรษฐศาสตร์\", \"คณะสถาปัตยกรรมศาสตร์\", \"คณะสังคมศาสตร์\", \"คณะสัตวแพทยศาสตร์\", \"คณะอุตสาหกรรมเกษตร\", \"คณะเทคนิคการสัตวแพทย์\", \"คณะสิ่งแวดล้อม\"],\n    editTicket: [],\n    load: false,\n    warning: false\n  }),\n  computed: {\n    createTime() {\n      return moment(this.editTicket.createTime).format(\"DD MMM YYYY hh:mm\");\n    },\n    lastUpdate() {\n      return moment(this.editTicket.lastUpdate).format(\"DD MMM YYYY hh:mm\");\n    },\n    sct() {\n      return [\"pending\", \"accepted\", \"resolved\", \"rejected\"];\n    },\n    validateitem() {\n      if (this.editTicket.title && this.editTicket.description && this.editTicket.contact.name && this.editTicket.contact.studentId && this.editTicket.contact.telephone && this.editTicket.contact.faculty && this.editTicket.contact.major) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n  },\n  methods: {\n    changeDialog(s) {\n      this.previewDialog = s;\n    },\n    async save() {\n      console.log(\"save\");\n      this.load = true;\n      if (!this.validateitem) {\n        this.load = false;\n        this.warning = true;\n      } else {\n        this.warning = false;\n        try {\n          let tkt = await axios.post('/addTicket', this.editTicket);\n          console.log(\"save success\");\n          this.load = false;\n          this.previewDialog = false;\n          location.reload();\n        } catch (err) {\n          this.load = false;\n          console.log(\"save fail\", err);\n        }\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AAmJA;AACA;AACA;EACAA;EACAC;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC,+CACA,sGACA,iFACA;IACAC;IACAC;IACAC;EACA;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA,IACA,yBACA,+BACA,gCACA,qCACA,qCACA,mCACA,+BACA;QACA;MACA,OACA;QACA;MACA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACA;MACAC;MACA;MACA;QACA;QACA;MACA,OACA;QACA;QACA;UACA;UACAA;UACA;UACA;UACAC;QACA,EACA;UACA;UACAD;QACA;MACA;IAEA;EACA;AACA","names":["name","props","data","previewDialog","items","statusSelect","yearSelect","facultySelect","editTicket","load","warning","computed","createTime","lastUpdate","sct","validateitem","methods","changeDialog","console","location"],"sourceRoot":"src/components","sources":["addNewTicket.vue"],"sourcesContent":["<template> \r\n  <v-dialog v-model=\"previewDialog\" width=\"650\" height=\"500\" class=\"rounded-3xl dragFont\">\r\n    <template v-slot:activator=\"{ on, attrs }\">\r\n      <a @click=\"changeDialog(true)\" class=\"w-8 h-8 mr-4\" v-bind=\"attrs\" v-on=\"on\" >\r\n        <font-awesome-icon class=\"w-8 h-8 text-yellow-500\" icon=\"fa-solid fa-pen-to-square\" />\r\n      </a>\r\n    </template>\r\n    <div class=\"w-full h-full mx-auto bg-gray-300 dragFont\">\r\n      <div class=\"flex flex-col\">\r\n        <div class=\"bg-white relative drop-shadow-2xl   p-4 m-4\">\r\n          <div class=\"flex-none sm:flex\">\r\n            <div class=\" relative h-32 w-32   sm:mb-0 mb-3 hidden\">\r\n              <a href=\"#\"\r\n                class=\"absolute -right-2 bottom-2   -ml-3  text-white p-1 text-xs bg-green-400 hover:bg-green-500 font-medium tracking-wider rounded-full transition ease-in duration-300\">\r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\"\r\n                  class=\"h-4 w-4\">\r\n                  <path\r\n                    d=\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\">\r\n                  </path>\r\n                </svg>\r\n              </a>\r\n            </div>\r\n            <div class=\"flex-auto justify-evenly\">\r\n              <div class=\"flex items-center justify-between\">\r\n                <div class=\"flex items-center  my-1\">\r\n                  <span class=\"mr-3 rounded-full bg-white w-8 h-8\"></span>\r\n                  <h2 class=\"text-s font-bold\">Ticket Update{{validateitem}}</h2>\r\n                </div>\r\n                <div v-if=\"load\" class=\"ml-auto mr-2 p-2\">\r\n                  <svg class=\"animate-spin h-5 w-5 mr-3\" viewBox=\"0 0 24 24\">\r\n                  </svg>\r\n                </div>\r\n                <button @click=\"save()\" class=\"ml-auto mr-2 p-2 bg-indigo-700 hover:bg-yellow-700 rounded-md text-white\">Save</button>\r\n                <button @click=\"changeDialog(false)\" class=\"ml-auto p-2 bg-red-500 hover:bg-yellow-700 rounded-md text-white\">Close</button>\r\n              </div>\r\n              <div class=\"border-b border-dashed border-b-2 my-5\"></div>\r\n              <div class=\"items-center\">\r\n                <div class=\"grid grid-cols-1 gap-2\">\r\n                  <div class=\"p-4\">\r\n                    <div v-if=\"warning\" class=\"ml-auto text-red-300\">Not correct, Please check your input.</div>\r\n                    <div class=\"ml-auto text-gray-300\">Id : {{editTicket.ticketId}}</div>\r\n                    <div class=\"text-sm mt-4\">Title</div>\r\n                    <div class=\"text-s font-bold border-2 shadow-2xl\">\r\n                      <input type=\"text\" class=\"w-full\" v-model=\"editTicket.title\"></input>\r\n                    </div>\r\n                    <div class=\"text-sm mt-4\">Description</div>\r\n                    <div class=\"text-s font-bold border-2 shadow-2xl\">\r\n                      <textarea class=\"w-full h-auto overflow-y-auto overflow-x-auto p-2\" v-model=\"editTicket.description\"></textarea>\r\n                    </div>\r\n                    <div class=\"text-sm mt-4\">Status</div>\r\n                    <div class=\"text-s font-bold border-2 shadow-2xl p-2\">\r\n                      <select v-model=\"editTicket.status\" class=\"block w-full appearance-none peer\">\r\n                        <option  v-for=\"(element, index) in statusSelect\" >{{element}}</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div> \r\n                </div>\r\n                \r\n                <div class=\"border-b border-dashed border-b-2 my-5 pt-5\">\r\n                  <div class=\"absolute rounded-full w-5 h-5 bg-gray-300 -mt-2 -left-2\"></div>\r\n                  <div class=\"absolute rounded-full w-5 h-5 bg-gray-300 -mt-2 -right-2\"></div>\r\n                </div>\r\n                \r\n                <div>\r\n                  <div class=\"grid grid-cols-2 gap-2\">\r\n                    <div class=\"p-4\">\r\n                      <div class=\"text-sm\">Name</div>\r\n                      <div class=\"text-s font-bold border-2 shadow-2xl\">\r\n                        <input type=\"text\" class=\"w-full\" v-model=\"editTicket.contact.name\"></input>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"p-4\">\r\n                      <div class=\"text-sm\">Student ID</div>\r\n                      <div class=\"text-s font-bold border-2 shadow-2xl\">\r\n                        <input type=\"text\" class=\"w-full\" v-model=\"editTicket.contact.studentId\"></input>\r\n                      </div>\r\n                    </div>\r\n                  </div> \r\n                </div>\r\n\r\n                <div>\r\n                  <div class=\"grid grid-cols-2 gap-2\">\r\n                    <div class=\"p-4\">\r\n                      <div class=\"text-sm\">Faculty</div>\r\n                      <div class=\"text-s font-bold border-2 shadow-2xl p-2\">\r\n                        <select v-model=\"editTicket.contact.faculty\" class=\"block w-full appearance-none peer\">\r\n                          <option  v-for=\"(element, index) in facultySelect\" >{{element}}</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"p-4\">\r\n                      <div class=\"text-sm\">Major</div>\r\n                      <div class=\"text-s font-bold border-2 shadow-2xl\">\r\n                        <input type=\"text\" class=\"w-full\" v-model=\"editTicket.contact.major\"></input>\r\n                      </div>\r\n                    </div>\r\n                  </div> \r\n                </div>\r\n\r\n                <div>\r\n                  <div class=\"grid grid-cols-2 gap-2\">\r\n                    <div class=\"p-4\">\r\n                      <div class=\"text-sm\">Telephone</div>\r\n                      <div class=\"text-s font-bold border-2 shadow-2xl\">\r\n                        <input type=\"text\" class=\"w-full\" v-model=\"editTicket.contact.telephone\"></input>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"p-4\">\r\n                      <div class=\"text-sm\">Year</div>\r\n                      <!-- <div class=\"text-s font-bold\">{{editTicket.contact.year}}</div> -->\r\n                      <div class=\"text-s font-bold border-2 shadow-2xl p-2\">\r\n                        <select v-model=\"editTicket.contact.year\" class=\"block w-full appearance-none peer\">\r\n                          <option  v-for=\"(element, index) in yearSelect\" >{{element}}</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"border-b border-dashed border-b-2 my-5 pt-5\">\r\n                  <div class=\"absolute rounded-full w-5 h-5 bg-gray-300 -mt-2 -left-2\"></div>\r\n                  <div class=\"absolute rounded-full w-5 h-5 bg-gray-300 -mt-2 -right-2\"></div>\r\n                </div>\r\n                \r\n                <div>\r\n                  <div class=\"grid grid-cols-2 gap-2\">\r\n                    <div class=\"p-4\">\r\n                      <div class=\"text-sm\">Create On</div>\r\n                      <div class=\"text-s font-bold\">{{createTime}}</div>\r\n                    </div>\r\n                    <div class=\"p-4\">\r\n                      <div class=\"text-sm\">Last Update</div>\r\n                      <div class=\"text-s font-bold\">{{lastUpdate}}</div>\r\n                    </div>\r\n                  </div> \r\n                </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n    </div>\r\n</v-dialog>\r\n</template>\r\n\r\n  <script>\r\n  import moment from 'moment';\r\n  import axios from 'axios';\r\n  export default {\r\n    name: 'dragTicket',\r\n    props: ['parentmessage'],\r\n    data: () => ({\r\n      previewDialog: false,\r\n      items: ['Foo', 'Bar', 'Fizz', 'Buzz'],\r\n      statusSelect: [\"pending\",\"accepted\",\"resolved\",\"rejected\"],\r\n      yearSelect: [1,2,3,4,5,6,7,8,\"จบการศึกษา\"],\r\n      facultySelect: [\"คณะเกษตร\",\"คณะบริหารธุรกิจ\",\r\n      \"คณะประมง\",\"คณะมนุษยศาสตร์\",\"คณะวนศาสตร์\",\"คณะวิทยาศาสตร์\",\"คณะวิศวกรรมศาสตร์\",\"คณะศึกษาศาสตร์\",\r\n      \"คณะเศรษฐศาสตร์\",\"คณะสถาปัตยกรรมศาสตร์\",\"คณะสังคมศาสตร์\",\"คณะสัตวแพทยศาสตร์\",\r\n      \"คณะอุตสาหกรรมเกษตร\",\"คณะเทคนิคการสัตวแพทย์\",\"คณะสิ่งแวดล้อม\",],\r\n      editTicket: [],\r\n      load: false,\r\n      warning: false\r\n    }),\r\n    computed: {\r\n        createTime(){\r\n          return moment(this.editTicket.createTime).format(\"DD MMM YYYY hh:mm\")\r\n        },\r\n        lastUpdate(){\r\n          return moment(this.editTicket.lastUpdate).format(\"DD MMM YYYY hh:mm\")\r\n        },\r\n        sct(){\r\n          return [\"pending\",\"accepted\",\"resolved\",\"rejected\"]\r\n        },\r\n        validateitem(){\r\n          if(\r\n            this.editTicket.title &&\r\n            this.editTicket.description &&\r\n            this.editTicket.contact.name &&\r\n            this.editTicket.contact.studentId &&\r\n            this.editTicket.contact.telephone &&\r\n            this.editTicket.contact.faculty &&\r\n            this.editTicket.contact.major\r\n          ){\r\n            return true\r\n          }\r\n          else{\r\n            return false\r\n          }\r\n        }\r\n    },\r\n    methods: {\r\n        changeDialog(s) {\r\n          this.previewDialog = s\r\n        },\r\n        async save() {\r\n            console.log(\"save\")\r\n            this.load = true\r\n            if(!this.validateitem){\r\n              this.load = false\r\n              this.warning = true\r\n            }\r\n            else{\r\n              this.warning = false\r\n              try{\r\n                let tkt = await axios.post('/addTicket',this.editTicket)\r\n                console.log(\"save success\")\r\n                this.load = false\r\n                this.previewDialog = false\r\n                location.reload()\r\n              }\r\n              catch(err){\r\n                this.load = false\r\n                console.log(\"save fail\",err)\r\n              }\r\n            }\r\n            \r\n        }\r\n    },\r\n  }\r\n  </script>\r\n\r\n  <style>\r\n  @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Thai:wght@500&family=Prompt:wght@500&display=swap');\r\n  .dragFont{\r\n    font-family: 'IBM Plex Sans Thai', sans-serif !important;\r\n  }\r\n  .barcode {\r\n\t\tleft: 50%;\r\n\t\tbox-shadow: 1px 0 0 1px, 5px 0 0 1px, 10px 0 0 1px, 11px 0 0 1px, 15px 0 0 1px, 18px 0 0 1px, 22px 0 0 1px, 23px 0 0 1px, 26px 0 0 1px, 30px 0 0 1px, 35px 0 0 1px, 37px 0 0 1px, 41px 0 0 1px, 44px 0 0 1px, 47px 0 0 1px, 51px 0 0 1px, 56px 0 0 1px, 59px 0 0 1px, 64px 0 0 1px, 68px 0 0 1px, 72px 0 0 1px, 74px 0 0 1px, 77px 0 0 1px, 81px 0 0 1px, 85px 0 0 1px, 88px 0 0 1px, 92px 0 0 1px, 95px 0 0 1px, 96px 0 0 1px, 97px 0 0 1px, 101px 0 0 1px, 105px 0 0 1px, 109px 0 0 1px, 110px 0 0 1px, 113px 0 0 1px, 116px 0 0 1px, 120px 0 0 1px, 123px 0 0 1px, 127px 0 0 1px, 130px 0 0 1px, 131px 0 0 1px, 134px 0 0 1px, 135px 0 0 1px, 138px 0 0 1px, 141px 0 0 1px, 144px 0 0 1px, 147px 0 0 1px, 148px 0 0 1px, 151px 0 0 1px, 155px 0 0 1px, 158px 0 0 1px, 162px 0 0 1px, 165px 0 0 1px, 168px 0 0 1px, 173px 0 0 1px, 176px 0 0 1px, 177px 0 0 1px, 180px 0 0 1px;\r\n\t\tdisplay: inline-block;\r\n\t\ttransform: translateX(-90px);\r\n\t}\r\n  </style>"]},"metadata":{},"sourceType":"module"}